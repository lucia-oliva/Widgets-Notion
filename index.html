<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Month Goals ‚ú®</title>

<style>

/* ============================= */
/*        ESTILOS BASE           */
/* ============================= */

body, html {
  margin: 0;
  padding: 0;
}

/* ============================= */
/*    MODO CLARO (theme=light)   */
/* ============================= */

body.theme-light {
  background: #fff7fb; /* pastel rosadito */
}

body.theme-light .card {
  background: #ffffff;
  border: 1px solid #ffe5f4;
  box-shadow: 0 8px 20px rgba(0,0,0,0.06);
}

body.theme-light .title {
  color: #ff82c5;
}

body.theme-light .subtitle {
  color: #a58cb5;
}

body.theme-light .pill {
  background: #ffe6f4;
  color: #c46caa;
}

body.theme-light .goal {
  background: #fff9ff;
  border: 1px solid #fbe4ff;
}

body.theme-light .goal-label {
  color: #7a668f;
}

body.theme-light .add-input {
  background: #fff8ff;
  border: 1px solid #f3d8f3;
  color: #7a668f;
}

body.theme-light .add-btn {
  background: #ffb4dd;
  color: #fff;
}

body.theme-light .footer {
  color: #b19bc5;
}


/* ============================= */
/*    MODO OSCURO (theme=dark)   */
/* ============================= */

body.theme-dark {
  background: #1F1F1F; /* igual al fondo de Notion dark */
}

body.theme-dark .card {
  background: #262626;
  border: 1px solid #3a3a3a;
  box-shadow: 0 10px 25px rgba(0,0,0,0.5);
}

body.theme-dark .title {
  color: #ffb8e8;
}

body.theme-dark .subtitle {
  color: #d8cde3;
}

body.theme-dark .pill {
  background: #3a2e39;
  color: #e6badf;
}

body.theme-dark .goal {
  background: #2f2a33;
  border: 1px solid #3d3146;
}

body.theme-dark .goal-label {
  color: #f0e0ff;
}

body.theme-dark .add-input {
  background: #322c35;
  border: 1px solid #4a4152;
  color: #e8d8f5;
}

body.theme-dark .add-btn {
  background: #ff93cf;
  color: #262626;
}

body.theme-dark .footer {
  color: #c7b5d9;
}


/* ============================= */
/*           CARD BASE           */
/* ============================= */

.card {
  max-width: 440px;
  margin: 0 auto;
  border-radius: 18px;
  padding: 20px 22px;
}

/* textos */
.title {
  font-size: 1.4rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 8px;
}

.subtitle {
  font-size: 0.85rem;
  margin-bottom: 14px;
}

.pill {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 0.75rem;
  margin-bottom: 12px;
}

/* lista */
#goals-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.goal {
  display: flex;
  align-items: center;
  gap: 10px;
  border-radius: 12px;
  padding: 8px 10px;
  transition: 0.1s;
}

.goal:hover {
  transform: translateY(-1px);
}

/* checks */
input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: #ff9acb;
}

/* texto meta */
.goal-label {
  flex: 1;
  font-size: 0.9rem;
}

.completed .goal-label {
  text-decoration: line-through;
}

/* borrar */
.delete-btn {
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 1rem;
  transition: 0.2s;
}

/* agregar */
.add-container {
  margin-top: 14px;
  display: flex;
  gap: 8px;
}

.add-input {
  flex: 1;
  padding: 8px 10px;
  border-radius: 10px;
  font-size: 0.9rem;
}

.add-btn {
  padding: 8px 12px;
  border-radius: 10px;
  border: none;
  font-size: 0.9rem;
  cursor: pointer;
  font-weight: 600;
}

.footer {
  margin-top: 14px;
  font-size: 0.75rem;
  text-align: right;
}

</style>
</head>

<body>
  <div class="card">
    <div class="title">Month Goals ‚ú®</div>
    <div class="subtitle">Lista de metas para: <span id="month-name"></span> üå∏</div>

    <ul id="goals-list"></ul>

    <div class="add-container">
      <input id="new-goal-input" class="add-input" placeholder="A√±adir meta... üå∏">
      <button class="add-btn" id="add-btn">+</button>
    </div>

    <div class="footer">Guardado localmente ‚ú®</div>
  </div>


<script>
/* ===================================================== */
/*   DETECTAR PREFERENCIA DEL SISTEMA (LIGHT / DARK)     */
/* ===================================================== */

const body = document.body;

// funci√≥n que aplica el tema seg√∫n el booleano
function applyTheme(isDark) {
  body.classList.remove('theme-dark', 'theme-light');
  body.classList.add(isDark ? 'theme-dark' : 'theme-light');
}

// 1) detectar preferencia inicial
if (window.matchMedia) {
  const mq = window.matchMedia('(prefers-color-scheme: dark)');
  applyTheme(mq.matches);

  // 2) opcional: escuchar cambios de tema del sistema en tiempo real
  if (mq.addEventListener) {
    mq.addEventListener('change', (e) => {
      applyTheme(e.matches);
    });
  } else if (mq.addListener) { // soporte para navegadores m√°s viejos
    mq.addListener((e) => {
      applyTheme(e.matches);
    });
  }
} else {
  // si el navegador no soporta matchMedia, usa light por defecto
  applyTheme(false);
}


/* ===================================================== */
/*               TU WIDGET ORIGINAL                      */
/* ===================================================== */

const STORAGE_KEY = "month-goals-with-add-delete-v1";
const listEl = document.getElementById("goals-list");
const addBtn = document.getElementById("add-btn");
const inputEl = document.getElementById("new-goal-input");

// Mostrar nombre del mes
const months = ["Enero","Febrero","Marzo","Abril","Mayo","Junio",
                "Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];
document.getElementById("month-name").textContent = months[new Date().getMonth()];

// Cargar datos
let goals = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");

function save() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(goals));
}

function render() {
  listEl.innerHTML = "";

  goals.forEach(goal => {
    const li = document.createElement("li");
    li.className = "goal";
    if (goal.checked) li.classList.add("completed");

    li.innerHTML = `
      <input type="checkbox" ${goal.checked ? "checked" : ""} data-id="${goal.id}">
      <span class="goal-label">${goal.text}</span>
      <button class="delete-btn" data-id="${goal.id}">‚ùå</button>
    `;

    listEl.appendChild(li);
  });
}

// A√±adir meta
addBtn.onclick = () => {
  const text = inputEl.value.trim();
  if (!text) return;

  goals.push({
    id: Date.now(),
    text,
    checked: false
  });

  inputEl.value = "";
  save();
  render();
};

// Checkbox / borrar
listEl.onclick = (e) => {
  const id = Number(e.target.dataset.id);

  if (e.target.tagName === "INPUT") {
    const g = goals.find(g => g.id === id);
    g.checked = e.target.checked;
    save();
    render();
  }

  if (e.target.classList.contains("delete-btn")) {
    goals = goals.filter(g => g.id !== id);
    save();
    render();
  }
};

render();
</script>

</body>
</html>

